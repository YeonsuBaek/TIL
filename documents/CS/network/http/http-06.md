# HTTP HTTP 상태코드

> ### Index
>
> 1. HTTP 상태코드 소개
> 2. 2xx - 성공
> 3. 3xx - 레다이렉션
> 4. 4xx - 클라이언트 오류
> 5. 5xx- 서버 오류

## 1. HTTP 상태코드 소개

상태코드란 클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능이다. 상태코드는 1~5 사이로 시작하는 세 자리 숫자로 이루어져 있다.

만약 클라이언트가 인식할 수 없는 상태코드를 서버가 반환한다면 상위 상태코드, 즉 맨 앞자리 숫자로 해석해서 처리한다. 예를 들어 299는 2xx(Successful)이라고 해석하면 된다.

### 1xx (Informational)

1xx는 요청이 수신되어 처리 중이라는 뜻으로, 거의 사용되지 않는다.

## 2. 2xx - 성공

2xx(Successful)은 클라이언트의 요청을 성공적으로 처리했다고 해석한다.

### 2-1. 200 OK.

200은 요청이 성공적이라는 뜻이다. 클라이언트가 서버에게 요청을 보내면, 서버는 200 OK라는 상태코드와 함께 응답을 보낸다.

### 2-2. 201 Created

201은 요청을 성공해서 새로운 리소스가 생성된 것을 말한다. 클라이언트가 POST 메서드로 요청하면, 서버는 응답을 보낸다. 이때 생성된 리소스는 응답의 Location 헤더 필드로 식별한다.

### 2-3. 202 Accepted

202는 요청이 접수되었으나 처리가 완료되지 않은 것을 말한다. 예를 들어 요청을 접수한 후 1시간 뒤에 배치 프로세스가 요청을 처리하는 경우 사용된다.

### 2-4. 204 No Content

204는 서버가 요청을 성공적으로 수행했지만, 응답 페이로드 본문에 보낼 데이터가 없는 경우를 말한다. 예를 들어 웹 문서 편집기에서 저장버튼을 누르면 결과적으로 아무 내용이 없어야 한고 동일한 화면을 유지해야 한다. 결과 내용이 없어도 204 메세지 만으로 성공을 인식할 수 있다.

## 3. 3xx - 리다이렉션

3xx(Redirection)은 요청을 완료하기 위해 유저 에이전트의 추가 조치를 필요로 하는 것이다. 이때 유저 에이전트는 웹 브라우저(클라이언트)를 말한다.

리다이렉션이란 웹 브라우저는 3xx 응답의 결과에 Location 헤더가 있으면 그 위치로 자동으로 이동하는 것을 말한다.

![](https://velog.velcdn.com/images/yeonsubaek/post/ec1a1522-1393-4e56-99ee-7950948f386b/image.jpeg)

리다이렉션에는 세 가지 종류가 있다.

### 3-1. 영구 리다이렉션 (301, 308)

영구 리다이렉션은 리소스의 URI가 영구적으로 이동하는 것이다. 기존 URI를 사용하지 않고, 검색 엔진 등에서도 변경을 인지한다.

#### 301 Moved Permanently

리다이렉트 시 요청 메서드가 무조건 GET으로 변하고, 본문이 제거될 수도 있다.

![](https://velog.velcdn.com/images/yeonsubaek/post/ab62dcf7-254f-4dbe-9cdc-9eaceb2dff98/image.jpeg)

#### 308 Permanent Redirect

301과 기능은 같으나, 리다이렉트 시 요청 메서드와 본문이 유지된다.

![](https://velog.velcdn.com/images/yeonsubaek/post/87581728-393a-41fd-a685-22c0c77087fa/image.jpeg)

### 3-2. 일시적인 리다이렉션 (302, 307, 308)

일시적인 리다이렉션은 리소스의 URI가 일시적으로 변경된다. 따라서 검색 엔진 등에서 URL을 변경하면 안된다.

#### 302 Found.

리다이렉트 시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있다.

#### 307 Temporary Redirect

302와 기능은 같지만, 리다이렉트 시 요청 메서드와 본문을 유지한다.

#### 303 See Other

302와 기능은 같지만, 리다이렉트 시 요청 메서드가 GET으로 변경된다.

#### PRG: Post/Redirect/Get

PRG를 사용하기 전에는 POST로 주문 후에 웹 브라우저를 새로고침하면 다시 요청되기 때문에 중복 주문이 될 수 있다.

![](https://velog.velcdn.com/images/yeonsubaek/post/f39b0416-9b8c-4a91-8a89-a066a7efbc28/image.jpeg)

PRG를 사용하면, POST로 주문 후에 새로고침으로 인한 중복 주문이 방지된다. 주문 후에 주문 결과 화면을 GET 메서드로 리다이렉트하고 새로고침을 해도 결과 화면을 GET으로 조회한다. 따라서 중복 주문 대신에 결과 화면만 GET으로 다시 요청한다.

![](https://velog.velcdn.com/images/yeonsubaek/post/ac0f9336-3e7c-4419-bace-91c3eebeec8c/image.jpeg)

PRG 이후에는 URL이 이미 POST에서 GET으로 리다이렉트 된다. 새로고침을 해도 GET으로 결과 화면만 조회한다.

#### 그래서 뭘 사용해야 할까?

처음 302 스펙의 의도는 HTTP 메서드를 유지하는 것이었다. 그런데 웹 브라우저들이 대부분 GET으로 바꿔버려서 모호한 302를 대신하는 명확한 307과 303이 등장하였다.

307과 303을 권장하지만 현실적으로 이미 많은 애플리케이션 라이브러리들이 302를 기본값으로 사용한다. 자동 리다이렉션 시 GET으로 변해도 되면 그냥 302를 사용해도 큰 문제가 없다.

### 3-3. 기타 리다이렉션 (303, 304)

#### 303 Multiple Choices

303은 안쓰인다.

#### 304 Not Modified.

304는 캐시를 목적으로 사용한다. 클라이언트에게 리소스가 수정되지 않았음을 알려준다. 따라서 클라이언트는 로컬PC에 저장된 캐시를 재사용한다.  
304 응답은 로컬 캐시를 사용해야 하므로 메시지 바디를 포함하면 안된다.

## 4. 4xx - 클라이언트 오류

4xx(Client Error)는 클라이언트의 요청에 잘못된 문법 등으로 서버가 요청을 수행할 수 없음을 뜻한다. 즉, 오류의 원인이 클라이언트에게 있다. 클라이언트가 이미 잘못된 요청이나 데이터를 보내고 있기 때문에 똑같이 재시도하여도 실패한다.

### 4-1. 400 Bad Request

400은 클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없는 것이다. 요청 구문이나 메세지 등에 오류가 난 경우이다. 이때 클라이언트는 요청 내용을 다시 검토하고 보내야한다.

### 4-2. 401 Unauthorized

401은 클라이언트가 해당 리소스에 대한 인증이 필요하다는 것이다. 401 오류 발생 시 응답에 WWW-Authenticate 헤더와 함께 인증 방법을 설명한다.

참고로 인증(Authentication)은 본인이 누구인지 확인하는 것이고 인가(Authorization)은 권한을 부여하는 것이지만, Unauthorized인 오류 메세지는 인증이 되지 않았다는 뜻이다.

### 4-3. 403 Forbidden

403은 서버가 요청을 이해했지만 승인을 거부한 것이다. 주로 인증 자격 증명은 있지만, 접근 권한이 불충분한 경우이다. 예를 들어, Admin 등급이 아닌 사용자가 로그인은 했지만 Admin 등급의 리소스에 접근하는 경우이다.

### 4-4. 404 Not Found

404는 요청 리소스를 찾을 수 없는 것이다. 요청 리소스가 서버에 없거나 클라이언트가 권한이 부족한 리소스에 접근할 때 해당 리소스를 숨기고 싶을 때 사용한다.

## 5. 5xx - 서버 오류

5xx(Server Error)는 서버 문제로 오류가 발생한 것이다. 서버에 문제가 있기 때문에 재시도하면 성공할 수도 있다.

### 5-1. 500 Internal Server Error

500은 서버 문제로 오류가 발생한 것으로, 애매하면 500 오류로 정한다.

### 5-2. 503 Service Unavailable

503은 서버가 일시적인 과부하 또는 예정된 작업으로 잠시 요청을 처리할 수 없는 것이다. 이때 Retry-After 헤더 필드로 얼마 뒤에 복구되는지 보낼 수 있다.

---

[모든 개발자를 위한 HTTP 웹 기본 지식](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC) 강의를 듣고 정리한 내용
